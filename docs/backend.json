{
  "entities": {
    "ContactFormSubmission": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactFormSubmission",
      "type": "object",
      "description": "Represents a contact form submission from the website.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the contact form submission."
        },
        "name": {
          "type": "string",
          "description": "The name of the person submitting the form."
        },
        "email": {
          "type": "string",
          "description": "The email address of the person submitting the form.",
          "format": "email"
        },
        "company": {
          "type": "string",
          "description": "The company name provided in the form."
        },
        "message": {
          "type": "string",
          "description": "The message content from the contact form."
        },
        "submissionDate": {
          "type": "string",
          "description": "The date and time the form was submitted.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The current status of the submission.",
          "enum": [
            "New",
            "Contacted",
            "Follow up",
            "Closed"
          ]
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "message",
        "submissionDate"
      ]
    },
    "CallRequest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CallRequest",
      "type": "object",
      "description": "Represents a request for a call back from a potential client.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the call request."
        },
        "name": {
          "type": "string",
          "description": "The name of the person requesting the call."
        },
        "email": {
          "type": "string",
          "description": "The email address of the person requesting the call.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the person requesting the call."
        },
        "submissionDate": {
          "type": "string",
          "description": "The date and time the request was submitted.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The current status of the call request.",
          "enum": [
            "New",
            "Contacted",
            "Follow up",
            "Closed"
          ]
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "phone",
        "submissionDate"
      ]
    },
    "Note": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Note",
      "type": "object",
      "description": "Represents a note added to a submission or request.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the note."
        },
        "content": {
          "type": "string",
          "description": "The content of the note."
        },
        "createdBy": {
          "type": "string",
          "description": "The email of the user who created the note.",
          "format": "email"
        },
        "createdAt": {
          "type": "string",
          "description": "The date and time the note was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "content",
        "createdBy",
        "createdAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/contact_form_submissions/{submissionId}",
        "definition": {
          "entityName": "ContactFormSubmission",
          "schema": {
            "$ref": "#/backend/entities/ContactFormSubmission"
          },
          "description": "Stores contact form submissions.",
          "params": [
            {
              "name": "submissionId",
              "description": "Unique identifier for the contact form submission."
            }
          ]
        }
      },
      {
        "path": "/contact_form_submissions/{submissionId}/notes/{noteId}",
        "definition": {
          "entityName": "Note",
          "schema": {
            "$ref": "#/backend/entities/Note"
          },
          "description": "Stores notes for a specific contact form submission.",
          "params": [
            {
              "name": "submissionId",
              "description": "The ID of the parent contact form submission."
            },
            {
              "name": "noteId",
              "description": "Unique identifier for the note."
            }
          ]
        }
      },
      {
        "path": "/call_requests/{requestId}",
        "definition": {
          "entityName": "CallRequest",
          "schema": {
            "$ref": "#/backend/entities/CallRequest"
          },
          "description": "Stores call back requests from potential clients.",
          "params": [
            {
              "name": "requestId",
              "description": "Unique identifier for the call request."
            }
          ]
        }
      },
      {
        "path": "/call_requests/{requestId}/notes/{noteId}",
        "definition": {
          "entityName": "Note",
          "schema": {
            "$ref": "#/backend/entities/Note"
          },
          "description": "Stores notes for a specific call request.",
          "params": [
            {
              "name": "requestId",
              "description": "The ID of the parent call request."
            },
            {
              "name": "noteId",
              "description": "Unique identifier for the note."
            }
          ]
        }
      }
    ],
    "reasoning": "This design prioritizes security and scalability for handling contact form submissions. All submissions are stored in a single collection, `/contact_form_submissions`, making listing submissions straightforward. No authorization dependencies exist as the dashboard will likely require admin access, which will be implemented out-of-scope using a separate authentication and role management system, as per the DBAC principle (Database Authentication and Authorization). This allows for future expansion without impacting the core security model of contact form submissions. The structure is simple and avoids any complex authorization rules, enabling efficient queries and updates. Subcollections for notes are added to keep related data together."
  }
}
